<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Comments Admin - GamesArc</title>
    <style>
        body { font-family: monospace; background: #0f172a; color: white; padding: 20px; }
        .stats-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 1rem; margin: 2rem 0; }
        .stat-card { background: #1e293b; padding: 1rem; border-radius: 10px; text-align: center; }
        .stat-number { font-size: 2rem; font-weight: bold; color: #8b5cf6; }
        .comment { background: #1e293b; padding: 1rem; margin: 1rem 0; border-radius: 10px; border-left: 4px solid #8b5cf6; }
        .comment-meta { color: #94a3b8; font-size: 0.9rem; margin-bottom: 0.5rem; }
        .comment-text { color: #e2e8f0; }
    </style>
</head>
<body>
    <h1>Comments Admin Panel</h1>
    
    <div class="stats-grid">
        <div class="stat-card">
            <div class="stat-number" id="totalComments">0</div>
            <div>Total Comments</div>
        </div>
        <div class="stat-card">
            <div class="stat-number" id="gtaComments">0</div>
            <div>GTA V Comments</div>
        </div>
        <div class="stat-card">
            <div class="stat-number" id="eldenComments">0</div>
            <div>Elden Ring Comments</div>
        </div>
        <div class="stat-card">
            <div class="stat-number" id="sekiroComments">0</div>
            <div>Sekiro Comments</div>
        </div>
    </div>
    
    <h2>Recent Comments</h2>
    <div id="recentComments">Loading comments...</div>
    
    <script src="comments-db.js"></script>
    <script>
        function loadStats() {
            try {
                // Check if CommentsDB exists
                if (!window.CommentsDB || typeof CommentsDB.getComments !== 'function') {
                    throw new Error('CommentsDB not available');
                }
                
                // Get comment counts
                const gtaComments = CommentsDB.getComments('gta-v').length
                const eldenComments = CommentsDB.getComments('elden-ring').length
                const sekiroComments = CommentsDB.getComments('sekiro').length
                const totalComments = gtaComments + eldenComments + sekiroComments
                
                // Update stats
                document.getElementById('totalComments').textContent = totalComments
                document.getElementById('gtaComments').textContent = gtaComments
                document.getElementById('eldenComments').textContent = eldenComments
                document.getElementById('sekiroComments').textContent = sekiroComments
                
                // Show recent comments
                displayRecentComments()
            } catch (error) {
                console.error('Error loading stats:', error)
                document.getElementById('recentComments').innerHTML = 
                    `<div class="comment" style="border-left-color: #ef4444;">
                        <div class="comment-meta">Error</div>
                        <div class="comment-text">Failed to load comments: ${error.message}</div>
                    </div>`
            }
        }
        
        function displayRecentComments() {
            const recentCommentsDiv = document.getElementById('recentComments')
            recentCommentsDiv.innerHTML = ''
            
            if (!CommentsDB.getRecentComments) {
                recentCommentsDiv.innerHTML = '<p>No recent comments function available</p>'
                return
            }
            
            const recent = CommentsDB.getRecentComments(10)
            
            if (recent.length === 0) {
                recentCommentsDiv.innerHTML = '<p>No comments yet</p>'
                return
            }
            
            recent.forEach(comment => {
                const commentDiv = document.createElement('div')
                commentDiv.className = 'comment'
                commentDiv.innerHTML = `
                    <div class="comment-meta">
                        Game: ${comment.game || 'Unknown'} | 
                        User: ${comment.user || 'Anonymous'} | 
                        Date: ${new Date(comment.timestamp).toLocaleString()}
                    </div>
                    <div class="comment-text">${comment.text || ''}</div>
                `
                recentCommentsDiv.appendChild(commentDiv)
            })
        }
        
        // Initialize when page loads
        document.addEventListener('DOMContentLoaded', loadStats)
    </script>
</body>
</html>